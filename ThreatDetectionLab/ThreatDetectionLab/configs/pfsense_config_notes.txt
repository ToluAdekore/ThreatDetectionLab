🛡️ pfSense Firewall Configuration - Homelab Setup
This guide walks you through configuring pfSense as a firewall to segment your private homelab network. Access to pfSense will be restricted to your Kali Linux machine.

📥 1. Download pfSense
Download the pfSense Community Edition ISO from:
https://www.pfsense.org/download/

🖥️ 2. Create the pfSense VM (VMware Workstation)
Steps:
Click Create a New Virtual Machine.

Select Typical (recommended) → Next.

Click Browse, locate your pfSense ISO → Next.

Name the VM:
pfsense → Next.

Allocate 20GB of disk space.
✅ Select Split virtual disk into multiple files.


Click Customize Hardware:

Set Memory to 2GB.

Add 5 Network Adapters, assigned as shown:

Interface	Purpose	VMware Network
em0	WAN (Internet access)	VMnet0 (Bridged)
em1	LAN (pfSense WebGUI access)	VMnet1
em2	OPT1 - Internal segment 1	VMnet2
em3	OPT2 - Internal segment 2	VMnet3
em4	OPT3 - SPAN port for Security Onion	VMnet4
em5	OPT4 - Reserved for future use	VMnet5

Example of Correct Hardware Setup:

⚙️ 3. pfSense Installation & Initial Setup
Power on the pfSense VM.

Accept all default installation prompts.

pfSense will auto-configure and reboot.

🖧 4. pfSense Console Configuration
Interface Assignment:
Select option 1 to assign interfaces.

When prompted:

Setup VLANs? → n

Assign interfaces as follows:

em0 → WAN

em1 → LAN

em2 → OPT1

em3 → OPT2

em4 → OPT3

em5 → OPT4

Confirm: y

LAN IP Configuration:
Select option 2 to set interface IPs.

Configure LAN (em1):

IP Address: 192.168.1.1

Subnet Mask: /24 (255.255.255.0)

No upstream gateway

OPT Interfaces:
Interface	IP Address	Notes
OPT1	Your IP Choice	Internal segment 1
OPT2	Your IP Choice	Internal segment 2
OPT3	No IP Assigned	SPAN port for Security Onion
OPT4	Your IP Choice	Reserved for future use

🌐 5. WebConfigurator Access
From your Kali Linux machine, open a browser and go to:
https://192.168.1.1

Default Login:

Username: admin

Password: pfsense

⚠️ You may need to accept a security certificate warning.

✅ Setup Complete
Further configuration will be handled through the pfSense WebGUI.

🔧 Optional Future Steps (To Document Later)
Firewall Rules

NAT Configuration

VLAN Setup

VPN Access

Integration with Security Onion & Splunk


